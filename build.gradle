plugins {
    id 'scala'
    id 'io.gatling.gradle' version '3.8.4'
    id "org.owasp.dependencycheck" version "8.0.2"
}

apply plugin: 'scala'
apply plugin: 'io.gatling.gradle'

group 'uk.gov.hmcts.reform'
version = '1.0'

allprojects {
    sourceCompatibility = '17'
    targetCompatibility = '17'
}

tasks.withType(JavaExec) {
    // Configure the size of the JVM if necessary
    jvmArgs = ['-Xms1024m', '-Xmx2048m']
    /* Use the following args to build a report when a test was terminated
    args = [
        "--reports-only", "fact-20201109092032896",
        '--results-folder', file('build/reports/gatling').absolutePath,
        ]
    */
}

tasks.withType(Copy).all{
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}

repositories {
    mavenCentral()
}

dependencies {
    gatling 'io.circe:circe-parser_2.13:0.14.0-M6'
    gatling "io.circe:circe-generic_2.13:0.14.0-M6"
}

gatling {
    gatlingVersion '3.8.4'
    scalaVersion '2.13.9'
    simulations = {
        include "uk.gov.hmcts.pcq.simulations.PCQSimulation"
    }
}

sourceSets {
    gatling {
        scala {
            srcDir 'src/gatling/simulations'
        }
        resources {
            srcDir 'src/gatling/resources'
        }
    }
}
